<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <title>Json con Bootstrap</title>
    </head>
    <body>
        <div class="container">
            <div class="alert alert-success">JSON</div>
            <button type="button" class="btn btn-primary" onClick="loadArrayJson();">Carica Libreria JSON</button>
            <button type="button" class="btn btn-danger" onClick="emptyVista();">Elimina vista JSON</button>
            
            <div id="vista" style="border: solid 0px rgb(200,0,0);"></div>
        </div>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script>
            async function loadArrayJson(){
                const response = await fetch('libreriavet.json');   // recupero la promise -> il file contiene 3 json.
                const libro = await response.json();                // ottengo il vettore di json
                console.log(libro);                                 // stampo i json in console
                let arrayLen = libro.length;

                let v = document.querySelector("#vista");
                let tab;
                let thead;
                let tbody;
                let trow;
                let tcol;
                let text;
                
                tab = document.createElement("table");
                tab.setAttribute("class","table table-striped");
                    thead = document.createElement("thead");
                        trow = document.createElement("tr");
                            tcol = document.createElement("th");
                            text = document.createTextNode("ID");
                            tcol.appendChild(text);
                            trow.appendChild(tcol);

                            tcol = document.createElement("th");
                            text = document.createTextNode("Titolo");
                            tcol.appendChild(text);
                            trow.appendChild(tcol);

                            tcol = document.createElement("th");
                            text = document.createTextNode("Autore");
                            tcol.appendChild(text);
                            trow.appendChild(tcol);

                            tcol = document.createElement("th");
                            text = document.createTextNode("Pagine");
                            tcol.appendChild(text);
                            trow.appendChild(tcol);

                            tcol = document.createElement("th");
                            text = document.createTextNode("Prezzo");
                            tcol.appendChild(text);
                            trow.appendChild(tcol);
                    thead.appendChild(trow);
                    tab.appendChild(thead);
                    tbody = document.createElement("tbody");
                        for(let i=0; i<arrayLen; i++){
                            trow = document.createElement("tr");
                                tcol=document.createElement("td");
                                text = document.createTextNode(i);
                                tcol.appendChild(text);
                                trow.appendChild(tcol);

                                tcol=document.createElement("td");
                                text = document.createTextNode(libro[i].titolo);
                                tcol.appendChild(text);
                                trow.appendChild(tcol);

                                tcol=document.createElement("td");
                                text = document.createTextNode(libro[i].autore);
                                tcol.appendChild(text);
                                trow.appendChild(tcol);

                                tcol=document.createElement("td");
                                text = document.createTextNode(libro[i].pagine);
                                tcol.appendChild(text);
                                trow.appendChild(tcol);

                                tcol=document.createElement("td");
                                text = document.createTextNode(libro[i].prezzo);
                                tcol.appendChild(text);
                                trow.appendChild(tcol);
                            tbody.appendChild(trow);
                        }
                    tab.appendChild(tbody);
                v.appendChild(tab);
            }
            function emptyVista(){
                let v = document.querySelector("#vista");
                v.innerHTML = "";
            }
        </script>
    </body>
</html>